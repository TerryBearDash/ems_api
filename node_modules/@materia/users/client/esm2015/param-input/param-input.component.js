/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes} checked by tsc
 */
import { Component, Input, Output, EventEmitter } from '@angular/core';
import { FormGroup } from '@angular/forms';
const /** @type {?} */ DefaultComponent = Object.freeze({
    text: 'text',
    number: 'text',
    date: 'date',
    float: 'text',
    boolean: 'switch'
});
export class ParamInputComponent {
    constructor() {
        this.showAsterisk = true;
        this.showCheckbox = true;
        this.changed = new EventEmitter();
    }
    /**
     * @return {?}
     */
    get requiredError() {
        return (this.form.get(this.param.name) &&
            this.form.get(this.param.name).hasError('required'));
    }
    /**
     * @return {?}
     */
    get checkboxName() {
        return `${this.param.name}_check`;
    }
    /**
     * @return {?}
     */
    ngOnInit() {
        this.type = this.param.type;
        if (!this.label) {
            this.label = this.param.name;
            if (this.param.required && this.showAsterisk) {
                this.label += '*';
            }
        }
        if (this.param && this.param.component) {
            if (this.param.component === 'input') {
                if (this.param.type === 'text' || this.param.type === 'string') {
                    this.actualComponent = 'text';
                }
                else if (this.param.type === 'number') {
                    this.actualComponent = 'number';
                }
                else {
                    this.actualComponent = this.param.component;
                }
            }
            else {
                if (this.param.component === 'datePicker') {
                    this.actualComponent = 'date';
                }
                else if (this.param.component === 'timePicker') {
                    this.actualComponent = 'time';
                }
                else if (this.param.component === 'dateTimePicker') {
                    this.actualComponent = 'datetime-local';
                }
                else {
                    this.actualComponent = this.param.component;
                }
            }
        }
        else {
            this.actualComponent = DefaultComponent[this.type];
        }
        if (this.showCheckbox && !this.param.required) {
            this.form.get(this.param.name).valueChanges.subscribe(val => {
                if (val) {
                    this.form.get(this.checkboxName).setValue(true);
                }
                else {
                    this.form.get(this.checkboxName).setValue(false);
                }
            });
        }
    }
}
ParamInputComponent.decorators = [
    { type: Component, args: [{
                selector: 'materia-param-input',
                template: `<div [formGroup]="form" fxLayout="row">
	<div fxLayout="row" fxFlex>
		<mat-checkbox [formControlName]="checkboxName" *ngIf=" ! param.required && showCheckbox && type !== 'boolean'">
		</mat-checkbox>
		<mat-form-field *ngIf="type != 'boolean' && actualComponent != 'markdown' && actualComponent != 'article'" fxFlex>
			<input *ngIf="type != 'boolean' && type != 'date' && type != 'float' && actualComponent != 'textarea'" tabindex="0" matInput
			 [formControlName]="param.name" [placeholder]="label" [type]="actualComponent" />
			<input *ngIf="type == 'float'" matInput tabindex="0" type="number" step="any" [placeholder]="label" [formControlName]="param.name"
			/>
			<textarea *ngIf="actualComponent == 'textarea'" tabindex="0" matInput [placeholder]="label" [formControlName]="param.name"></textarea>
			<input *ngIf="type == 'date'" matInput tabindex="0" [formControlName]="param.name" [matDatepicker]="picker" [placeholder]="param.name">
			<mat-datepicker-toggle *ngIf="type == 'date'" matSuffix [for]="picker"></mat-datepicker-toggle>
			<mat-datepicker #picker></mat-datepicker>
			<mat-error *ngIf="requiredError">
				{{param.name}} is
				<strong>required</strong>
			</mat-error>
		</mat-form-field>
		<mat-checkbox *ngIf="type == 'boolean'" tabindex="0" [formControlName]="param.name" style="top: 0;">{{label}}</mat-checkbox>
		<div class="markdown" *ngIf="actualComponent == 'markdown'" fxLayout="column" fxFlex>
			<label>{{label}}</label>
			<textarea tabindex="0" [formControlName]="param.name" simplemde="{spellChecker: false, toolbar: ['bold', 'italic', 'heading', '|', 'quote', 'unordered-list', 'ordered-list', '|', 'link', 'image', 'table']}"></textarea>
		</div>
	</div>
</div>`,
                styles: [``]
            },] },
];
/** @nocollapse */
ParamInputComponent.ctorParameters = () => [];
ParamInputComponent.propDecorators = {
    "param": [{ type: Input },],
    "disabled": [{ type: Input },],
    "form": [{ type: Input },],
    "label": [{ type: Input },],
    "showAsterisk": [{ type: Input },],
    "showCheckbox": [{ type: Input },],
    "changed": [{ type: Output },],
};
function ParamInputComponent_tsickle_Closure_declarations() {
    /** @type {!Array<{type: !Function, args: (undefined|!Array<?>)}>} */
    ParamInputComponent.decorators;
    /**
     * @nocollapse
     * @type {function(): !Array<(null|{type: ?, decorators: (undefined|!Array<{type: !Function, args: (undefined|!Array<?>)}>)})>}
     */
    ParamInputComponent.ctorParameters;
    /** @type {!Object<string,!Array<{type: !Function, args: (undefined|!Array<?>)}>>} */
    ParamInputComponent.propDecorators;
    /** @type {?} */
    ParamInputComponent.prototype.param;
    /** @type {?} */
    ParamInputComponent.prototype.disabled;
    /** @type {?} */
    ParamInputComponent.prototype.form;
    /** @type {?} */
    ParamInputComponent.prototype.label;
    /** @type {?} */
    ParamInputComponent.prototype.showAsterisk;
    /** @type {?} */
    ParamInputComponent.prototype.showCheckbox;
    /** @type {?} */
    ParamInputComponent.prototype.type;
    /** @type {?} */
    ParamInputComponent.prototype.actualComponent;
    /** @type {?} */
    ParamInputComponent.prototype.changed;
}

//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoicGFyYW0taW5wdXQuY29tcG9uZW50LmpzIiwic291cmNlUm9vdCI6Im5nOi8vQG1hdGVyaWEvdXNlcnMvIiwic291cmNlcyI6WyJwYXJhbS1pbnB1dC9wYXJhbS1pbnB1dC5jb21wb25lbnQudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7OztBQUFBLE9BQU8sRUFBRSxTQUFTLEVBQUUsS0FBSyxFQUFVLE1BQU0sRUFBRSxZQUFZLEVBQUUsTUFBTSxlQUFlLENBQUM7QUFFL0UsT0FBTyxFQUFFLFNBQVMsRUFBRSxNQUFNLGdCQUFnQixDQUFDO0FBRTNDLHVCQUFNLGdCQUFnQixHQUFHLE1BQU0sQ0FBQyxNQUFNLENBQUM7SUFDckMsSUFBSSxFQUFFLE1BQU07SUFDWixNQUFNLEVBQUUsTUFBTTtJQUNkLElBQUksRUFBRSxNQUFNO0lBQ1osS0FBSyxFQUFFLE1BQU07SUFDYixPQUFPLEVBQUUsUUFBUTtDQUNsQixDQUFDLENBQUM7QUErQkgsTUFBTTtJQTBCSjs0QkFuQndCLElBQUk7NEJBQ0osSUFBSTt1QkFLUixJQUFJLFlBQVksRUFBTztLQWEzQjs7OztJQVhoQixJQUFJLGFBQWE7UUFDZixNQUFNLENBQUMsQ0FDTCxJQUFJLENBQUMsSUFBSSxDQUFDLEdBQUcsQ0FBQyxJQUFJLENBQUMsS0FBSyxDQUFDLElBQUksQ0FBQztZQUM5QixJQUFJLENBQUMsSUFBSSxDQUFDLEdBQUcsQ0FBQyxJQUFJLENBQUMsS0FBSyxDQUFDLElBQUksQ0FBQyxDQUFDLFFBQVEsQ0FBQyxVQUFVLENBQUMsQ0FDcEQsQ0FBQztLQUNIOzs7O0lBRUQsSUFBSSxZQUFZO1FBQ2QsTUFBTSxDQUFDLEdBQUcsSUFBSSxDQUFDLEtBQUssQ0FBQyxJQUFJLFFBQVEsQ0FBQztLQUNuQzs7OztJQUlELFFBQVE7UUFDTixJQUFJLENBQUMsSUFBSSxHQUFHLElBQUksQ0FBQyxLQUFLLENBQUMsSUFBSSxDQUFDO1FBRTVCLEVBQUUsQ0FBQyxDQUFDLENBQUMsSUFBSSxDQUFDLEtBQUssQ0FB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QixRQUFRLEVBQUU7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztPQXdCTDtnQkFDTCxNQUFNLEVBQUUsQ0FBQyxFQUFFLENBQUM7YUFDYjs7Ozs7c0JBRUUsS0FBSzt5QkFDTCxLQUFLO3FCQUVMLEtBQUs7c0JBQ0wsS0FBSzs2QkFFTCxLQUFLOzZCQUNMLEtBQUs7d0JBS0wsTUFBTSIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IENvbXBvbmVudCwgSW5wdXQsIE9uSW5pdCwgT3V0cHV0LCBFdmVudEVtaXR0ZXIgfSBmcm9tICdAYW5ndWxhci9jb3JlJztcblxuaW1wb3J0IHsgRm9ybUdyb3VwIH0gZnJvbSAnQGFuZ3VsYXIvZm9ybXMnO1xuXG5jb25zdCBEZWZhdWx0Q29tcG9uZW50ID0gT2JqZWN0LmZyZWV6ZSh7XG4gIHRleHQ6ICd0ZXh0JyxcbiAgbnVtYmVyOiAndGV4dCcsXG4gIGRhdGU6ICdkYXRlJyxcbiAgZmxvYXQ6ICd0ZXh0JyxcbiAgYm9vbGVhbjogJ3N3aXRjaCdcbn0pO1xuXG5AQ29tcG9uZW50KHtcbiAgc2VsZWN0b3I6ICdtYXRlcmlhLXBhcmFtLWlucHV0JyxcbiAgdGVtcGxhdGU6IGA8ZGl2IFtmb3JtR3JvdXBdPVwiZm9ybVwiIGZ4TGF5b3V0PVwicm93XCI+XG5cdDxkaXYgZnhMYXlvdXQ9XCJyb3dcIiBmeEZsZXg+XG5cdFx0PG1hdC1jaGVja2JveCBbZm9ybUNvbnRyb2xOYW1lXT1cImNoZWNrYm94TmFtZVwiICpuZ0lmPVwiICEgcGFyYW0ucmVxdWlyZWQgJiYgc2hvd0NoZWNrYm94ICYmIHR5cGUgIT09ICdib29sZWFuJ1wiPlxuXHRcdDwvbWF0LWNoZWNrYm94PlxuXHRcdDxtYXQtZm9ybS1maWVsZCAqbmdJZj1cInR5cGUgIT0gJ2Jvb2xlYW4nICYmIGFjdHVhbENvbXBvbmVudCAhPSAnbWFya2Rvd24nICYmIGFjdHVhbENvbXBvbmVudCAhPSAnYXJ0aWNsZSdcIiBmeEZsZXg+XG5cdFx0XHQ8aW5wdXQgKm5nSWY9XCJ0eXBlICE9ICdib29sZWFuJyAmJiB0eXBlICE9ICdkYXRlJyAmJiB0eXBlICE9ICdmbG9hdCcgJiYgYWN0dWFsQ29tcG9uZW50ICE9ICd0ZXh0YXJlYSdcIiB0YWJpbmRleD1cIjBcIiBtYXRJbnB1dFxuXHRcdFx0IFtmb3JtQ29udHJvbE5hbWVdPVwicGFyYW0ubmFtZVwiIFtwbGFjZWhvbGRlcl09XCJsYWJlbFwiIFt0eXBlXT1cImFjdHVhbENvbXBvbmVudFwiIC8+XG5cdFx0XHQ8aW5wdXQgKm5nSWY9XCJ0eXBlID09ICdmbG9hdCdcIiBtYXRJbnB1dCB0YWJpbmRleD1cIjBcIiB0eXBlPVwibnVtYmVyXCIgc3RlcD1cImFueVwiIFtwbGFjZWhvbGRlcl09XCJsYWJlbFwiIFtmb3JtQ29udHJvbE5hbWVdPVwicGFyYW0ubmFtZVwiXG5cdFx0XHQvPlxuXHRcdFx0PHRleHRhcmVhICpuZ0lmPVwiYWN0dWFsQ29tcG9uZW50ID09ICd0ZXh0YXJlYSdcIiB0YWJpbmRleD1cIjBcIiBtYXRJbnB1dCBbcGxhY2Vob2xkZXJdPVwibGFiZWxcIiBbZm9ybUNvbnRyb2xOYW1lXT1cInBhcmFtLm5hbWVcIj48L3RleHRhcmVhPlxuXHRcdFx0PGlucHV0ICpuZ0lmPVwidHlwZSA9PSAnZGF0ZSdcIiBtYXRJbnB1dCB0YWJpbmRleD1cIjBcIiBbZm9ybUNvbnRyb2xOYW1lXT1cInBhcmFtLm5hbWVcIiBbbWF0RGF0ZXBpY2tlcl09XCJwaWNrZXJcIiBbcGxhY2Vob2xkZXJdPVwicGFyYW0ubmFtZVwiPlxuXHRcdFx0PG1hdC1kYXRlcGlja2VyLXRvZ2dsZSAqbmdJZj1cInR5cGUgPT0gJ2RhdGUnXCIgbWF0U3VmZml4IFtmb3JdPVwicGlja2VyXCI+PC9tYXQtZGF0ZXBpY2tlci10b2dnbGU+XG5cdFx0XHQ8bWF0LWRhdGVwaWNrZXIgI3BpY2tlcj48L21hdC1kYXRlcGlja2VyPlxuXHRcdFx0PG1hdC1lcnJvciAqbmdJZj1cInJlcXVpcmVkRXJyb3JcIj5cblx0XHRcdFx0e3twYXJhbS5uYW1lfX0gaXNcblx0XHRcdFx0PHN0cm9uZz5yZXF1aXJlZDwvc3Ryb25nPlxuXHRcdFx0PC9tYXQtZXJyb3I+XG5cdFx0PC9tYXQtZm9ybS1maWVsZD5cblx0XHQ8bWF0LWNoZWNrYm94ICpuZ0lmPVwidHlwZSA9PSAnYm9vbGVhbidcIiB0YWJpbmRleD1cIjBcIiBbZm9ybUNvbnRyb2xOYW1lXT1cInBhcmFtLm5hbWVcIiBzdHlsZT1cInRvcDogMDtcIj57e2xhYmVsfX08L21hdC1jaGVja2JveD5cblx0XHQ8ZGl2IGNsYXNzPVwibWFya2Rvd25cIiAqbmdJZj1cImFjdHVhbENvbXBvbmVudCA9PSAnbWFya2Rvd24nXCIgZnhMYXlvdXQ9XCJjb2x1bW5cIiBmeEZsZXg+XG5cdFx0XHQ8bGFiZWw+e3tsYWJlbH19PC9sYWJlbD5cblx0XHRcdDx0ZXh0YXJlYSB0YWJpbmRleD1cIjBcIiBbZm9ybUNvbnRyb2xOYW1lXT1cInBhcmFtLm5hbWVcIiBzaW1wbGVtZGU9XCJ7c3BlbGxDaGVja2VyOiBmYWxzZSwgdG9vbGJhcjogWydib2xkJywgJ2l0YWxpYycsICdoZWFkaW5nJywgJ3wnLCAncXVvdGUnLCAndW5vcmRlcmVkLWxpc3QnLCAnb3JkZXJlZC1saXN0JywgJ3wnLCAnbGluaycsICdpbWFnZScsICd0YWJsZSddfVwiPjwvdGV4dGFyZWE+XG5cdFx0PC9kaXY+XG5cdDwvZGl2PlxuPC9kaXY+YCxcbiAgc3R5bGVzOiBbYGBdXG59KVxuZXhwb3J0IGNsYXNzIFBhcmFtSW5wdXRDb21wb25lbnQgaW1wbGVtZW50cyBPbkluaXQge1xuICBASW5wdXQoKSBwYXJhbTogYW55O1xuICBASW5wdXQoKSBkaXNhYmxlZDogYm9vbGVhbjtcblxuICBASW5wdXQoKSBmb3JtOiBGb3JtR3JvdXA7XG4gIEBJbnB1dCgpIGxhYmVsOiBzdHJpbmc7XG5cbiAgQElucHV0KCkgc2hvd0FzdGVyaXNrID0gdHJ1ZTtcbiAgQElucHV0KCkgc2hvd0NoZWNrYm94ID0gdHJ1ZTtcblxuICB0eXBlOiBzdHJpbmc7XG4gIGFjdHVhbENvbXBvbmVudDogc3RyaW5nO1xuXG4gIEBPdXRwdXQoKSBjaGFuZ2VkID0gbmV3IEV2ZW50RW1pdHRlcjxhbnk+KCk7XG5cbiAgZ2V0IHJlcXVpcmVkRXJyb3IoKSB7XG4gICAgcmV0dXJuIChcbiAgICAgIHRoaXMuZm9ybS5nZXQodGhpcy5wYXJhbS5uYW1lKSAmJlxuICAgICAgdGhpcy5mb3JtLmdldCh0aGlzLnBhcmFtLm5hbWUpLmhhc0Vycm9yKCdyZXF1aXJlZCcpXG4gICAgKTtcbiAgfVxuXG4gIGdldCBjaGVja2JveE5hbWUoKSB7XG4gICAgcmV0dXJuIGAke3RoaXMucGFyYW0ubmFtZX1fY2hlY2tgO1xuICB9XG5cbiAgY29uc3RydWN0b3IoKSB7fVxuXG4gIG5nT25Jbml0KCkge1xuICAgIHRoaXMudHlwZSA9IHRoaXMucGFyYW0udHlwZTtcblxuICAgIGlmICghdGhpcy5sYWJlbCkge1xuICAgICAgdGhpcy5sYWJlbCA9IHRoaXMucGFyYW0ubmFtZTtcbiAgICAgIGlmICh0aGlzLnBhcmFtLnJlcXVpcmVkICYmIHRoaXMuc2hvd0FzdGVyaXNrKSB7XG4gICAgICAgIHRoaXMubGFiZWwgKz0gJyonO1xuICAgICAgfVxuICAgIH1cblxuICAgIGlmICh0aGlzLnBhcmFtICYmIHRoaXMucGFyYW0uY29tcG9uZW50KSB7XG4gICAgICBpZiAodGhpcy5wYXJhbS5jb21wb25lbnQgPT09ICdpbnB1dCcpIHtcbiAgICAgICAgaWYgKHRoaXMucGFyYW0udHlwZSA9PT0gJ3RleHQnIHx8IHRoaXMucGFyYW0udHlwZSA9PT0gJ3N0cmluZycpIHtcbiAgICAgICAgICB0aGlzLmFjdHVhbENvbXBvbmVudCA9ICd0ZXh0JztcbiAgICAgICAgfSBlbHNlIGlmICh0aGlzLnBhcmFtLnR5cGUgPT09ICdudW1iZXInKSB7XG4gICAgICAgICAgdGhpcy5hY3R1YWxDb21wb25lbnQgPSAnbnVtYmVyJztcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICB0aGlzLmFjdHVhbENvbXBvbmVudCA9IHRoaXMucGFyYW0uY29tcG9uZW50O1xuICAgICAgICB9XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBpZiAodGhpcy5wYXJhbS5jb21wb25lbnQgPT09ICdkYXRlUGlja2VyJykge1xuICAgICAgICAgIHRoaXMuYWN0dWFsQ29tcG9uZW50ID0gJ2RhdGUnO1xuICAgICAgICB9IGVsc2UgaWYgKHRoaXMucGFyYW0uY29tcG9uZW50ID09PSAndGltZVBpY2tlcicpIHtcbiAgICAgICAgICB0aGlzLmFjdHVhbENvbXBvbmVudCA9ICd0aW1lJztcbiAgICAgICAgfSBlbHNlIGlmICh0aGlzLnBhcmFtLmNvbXBvbmVudCA9PT0gJ2RhdGVUaW1lUGlja2VyJykge1xuICAgICAgICAgIHRoaXMuYWN0dWFsQ29tcG9uZW50ID0gJ2RhdGV0aW1lLWxvY2FsJztcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICB0aGlzLmFjdHVhbENvbXBvbmVudCA9IHRoaXMucGFyYW0uY29tcG9uZW50O1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMuYWN0dWFsQ29tcG9uZW50ID0gRGVmYXVsdENvbXBvbmVudFt0aGlzLnR5cGVdO1xuICAgIH1cblxuICAgIGlmICh0aGlzLnNob3dDaGVja2JveCAmJiAhdGhpcy5wYXJhbS5yZXF1aXJlZCkge1xuICAgICAgdGhpcy5mb3JtLmdldCh0aGlzLnBhcmFtLm5hbWUpLnZhbHVlQ2hhbmdlcy5zdWJzY3JpYmUodmFsID0+IHtcbiAgICAgICAgaWYgKHZhbCkge1xuICAgICAgICAgIHRoaXMuZm9ybS5nZXQodGhpcy5jaGVja2JveE5hbWUpLnNldFZhbHVlKHRydWUpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHRoaXMuZm9ybS5nZXQodGhpcy5jaGVja2JveE5hbWUpLnNldFZhbHVlKGZhbHNlKTtcbiAgICAgICAgfVxuICAgICAgfSk7XG4gICAgfVxuICB9XG59XG4iXX0=